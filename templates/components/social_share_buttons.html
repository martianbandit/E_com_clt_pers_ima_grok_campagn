{% macro social_share_buttons(campaign_title='', campaign_description='', campaign_image_url='', current_url='') %}
<div class="social-share-container">
    <div class="social-share-header">
        <h5 class="mb-2">
            <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">{{ _('Exporter et partager cette campagne') }}
        </h5>
        <p class="text-muted small">{{ _('Utilisez ces boutons pour publier votre campagne sur vos réseaux sociaux favoris') }}</p>
    </div>
    
    <div class="social-buttons">
        <!-- Facebook -->
        <a href="https://www.facebook.com/sharer/sharer.php?u={{ current_url }}&quote={{ campaign_title }}" 
           target="_blank" 
           class="social-button facebook-share" 
           data-toggle="tooltip" 
           title="{{ _('Partager sur Facebook') }}">
            <i class="fab fa-facebook-f" style="color: #cc4a28;"></i>
            <span>Facebook</span>
        </a>
        
        <!-- Twitter/X -->
        <a href="https://twitter.com/intent/tweet?text={{ campaign_title }}&url={{ current_url }}" 
           target="_blank" 
           class="social-button twitter-share" 
           data-toggle="tooltip" 
           title="{{ _('Partager sur Twitter/X') }}">
            <i class="fab fa-twitter" style="color: #cc4a28;"></i>
            <span>Twitter</span>
        </a>
        
        <!-- LinkedIn -->
        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ current_url }}&title={{ campaign_title }}&summary={{ campaign_description }}" 
           target="_blank" 
           class="social-button linkedin-share" 
           data-toggle="tooltip" 
           title="{{ _('Partager sur LinkedIn') }}">
            <i class="fab fa-linkedin-in" style="color: #cc4a28;"></i>
            <span>LinkedIn</span>
        </a>
        
        <!-- Pinterest (pour les images) -->
        <a href="https://pinterest.com/pin/create/button/?url={{ current_url }}&media={{ campaign_image_url }}&description={{ campaign_title }}" 
           target="_blank" 
           class="social-button pinterest-share" 
           data-toggle="tooltip" 
           title="{{ _('Épingler sur Pinterest') }}">
            <i class="fab fa-pinterest-p" style="color: #cc4a28;"></i>
            <span>Pinterest</span>
        </a>
        
        <!-- Reddit -->
        <a href="https://www.reddit.com/submit?url={{ current_url }}&title={{ campaign_title }}" 
           target="_blank" 
           class="social-button reddit-share" 
           data-toggle="tooltip" 
           title="{{ _('Partager sur Reddit') }}">
            <i class="fab fa-reddit-alien" style="color: #cc4a28;"></i>
            <span>Reddit</span>
        </a>
        
        <!-- Bouton de copie du lien -->
        <button class="social-button copy-link" data-url="{{ current_url }}" data-toggle="tooltip" title="{{ _('Copier le lien') }}">
            <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
            <span>{{ _('Copier') }}</span>
        </button>
    </div>
    
    <!-- Section Export -->
    <div class="export-section mt-4">
        <h6 class="mb-3" style="color: #cc4a28;">{{ _('Exporter en:') }}</h6>
        <div class="export-buttons d-grid gap-2">
            <!-- Export PDF -->
            <button class="export-button btn btn-outline-primary" onclick="exportCampaignPDF()" data-toggle="tooltip" title="{{ _('Exporter en PDF') }}">
                <i class="fas fa-file-pdf me-2"></i>
                <span>PDF</span>
            </button>
            
            <!-- Export Image -->
            <button class="export-button btn btn-outline-success" onclick="exportCampaignImage()" data-toggle="tooltip" title="{{ _('Exporter comme image') }}">
                <i class="fas fa-image me-2"></i>
                <span>Image</span>
            </button>
            
            <!-- Export Texte -->
            <button class="export-button btn btn-outline-warning" onclick="exportCampaignText()" data-toggle="tooltip" title="{{ _('Exporter en texte') }}">
                <i class="fas fa-file-alt me-2"></i>
                <span>Texte</span>
            </button>
            
            <!-- Export JSON -->
            <button class="export-button btn btn-outline-info" onclick="exportCampaignJSON()" data-toggle="tooltip" title="{{ _('Exporter en JSON') }}">
                <i class="fas fa-code me-2"></i>
                <span>JSON</span>
            </button>
            
            <!-- Export Email Template -->
            <button class="export-button btn btn-outline-secondary" onclick="exportEmailTemplate()" data-toggle="tooltip" title="{{ _('Créer un template email') }}">
                <i class="fas fa-envelope me-2"></i>
                <span>Email Template</span>
            </button>
        </div>
    </div>
    
    <!-- Section Publication Automatique -->
    <div class="auto-publish-section mt-4">
        <h6 class="mb-3" style="color: #cc4a28;">{{ _('Publication automatique:') }}</h6>
        <div class="auto-publish-buttons d-grid gap-2">
            <!-- Publication directe Facebook -->
            <button class="publish-button btn btn-primary" onclick="publishToFacebook()" data-toggle="tooltip" title="{{ _('Publier directement sur Facebook') }}">
                <i class="fab fa-facebook-f me-2"></i>
                <span>Publier sur Facebook</span>
            </button>
            
            <!-- Publication directe Instagram -->
            <button class="publish-button btn btn-primary" onclick="publishToInstagram()" data-toggle="tooltip" title="{{ _('Publier directement sur Instagram') }}">
                <i class="fab fa-instagram me-2"></i>
                <span>Publier sur Instagram</span>
            </button>
            
            <!-- Publication directe LinkedIn -->
            <button class="publish-button btn btn-primary" onclick="publishToLinkedIn()" data-toggle="tooltip" title="{{ _('Publier directement sur LinkedIn') }}">
                <i class="fab fa-linkedin-in me-2"></i>
                <span>Publier sur LinkedIn</span>
            </button>
            
            <!-- Publication directe Twitter -->
            <button class="publish-button btn btn-primary" onclick="publishToTwitter()" data-toggle="tooltip" title="{{ _('Publier directement sur Twitter') }}">
                <i class="fab fa-twitter me-2"></i>
                <span>Publier sur Twitter</span>
            </button>
            
            <!-- Publication multi-plateformes -->
            <button class="publish-button btn btn-success" onclick="publishToMultiplePlatforms()" data-toggle="tooltip" title="{{ _('Publier sur toutes les plateformes configurées') }}">
                <i class="fas fa-broadcast-tower me-2"></i>
                <span>Publication Multiple</span>
            </button>
        </div>
    </div>
    
    <!-- Section Email Marketing -->
    <div class="email-marketing-section mt-4">
        <h6 class="mb-3" style="color: #cc4a28;">{{ _('Email Marketing:') }}</h6>
        <div class="email-marketing-buttons d-grid gap-2">
            <!-- Créer campagne email -->
            <button class="email-button btn btn-outline-primary" onclick="createEmailCampaign()" data-toggle="tooltip" title="{{ _('Créer une campagne email avec ce contenu') }}">
                <i class="fas fa-mail-bulk me-2"></i>
                <span>Créer Campagne Email</span>
            </button>
            
            <!-- Envoyer newsletter -->
            <button class="email-button btn btn-outline-success" onclick="sendNewsletter()" data-toggle="tooltip" title="{{ _('Envoyer comme newsletter') }}">
                <i class="fas fa-newspaper me-2"></i>
                <span>Envoyer Newsletter</span>
            </button>
        </div>
    </div>
    
    <!-- Section Analytics -->
    <div class="analytics-section mt-4">
        <h6 class="mb-3" style="color: #cc4a28;">{{ _('Analytics & Tracking:') }}</h6>
        <div class="analytics-buttons d-grid gap-2">
            <!-- Créer lien trackable -->
            <button class="analytics-button btn btn-outline-info" onclick="createTrackableLink()" data-toggle="tooltip" title="{{ _('Créer un lien avec tracking') }}">
                <i class="fas fa-link me-2"></i>
                <span>Lien Trackable</span>
            </button>
            
            <!-- QR Code -->
            <button class="analytics-button btn btn-outline-dark" onclick="generateQRCode()" data-toggle="tooltip" title="{{ _('Générer un QR Code') }}">
                <i class="fas fa-qrcode me-2"></i>
                <span>QR Code</span>
            </button>
        </div>
    </div>
</div>

<style>
.social-share-container {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 20px;
    border-radius: 15px;
    color: white;
}

.social-share-header h5 {
    color: white;
    font-weight: 600;
}

.social-buttons {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 10px;
    margin-bottom: 20px;
}

.social-button {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    color: white;
    text-decoration: none;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.social-button:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    color: white;
}

.social-button i {
    margin-right: 8px;
    font-size: 16px;
}

.export-section, .auto-publish-section, .email-marketing-section, .analytics-section {
    background: rgba(255, 255, 255, 0.1);
    padding: 15px;
    border-radius: 10px;
    backdrop-filter: blur(5px);
}

.export-buttons, .auto-publish-buttons, .email-marketing-buttons, .analytics-buttons {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 8px;
}

.export-button, .publish-button, .email-button, .analytics-button {
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    transition: all 0.3s ease;
}

.export-button:hover, .publish-button:hover, .email-button:hover, .analytics-button:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
    color: white;
}

.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

.loading-content {
    background: white;
    padding: 30px;
    border-radius: 15px;
    text-align: center;
    max-width: 300px;
}

.success-message {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #28a745;
    color: white;
    padding: 15px 20px;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 1000;
    opacity: 0;
    transform: translateX(100%);
    transition: all 0.3s ease;
}

.success-message.show {
    opacity: 1;
    transform: translateX(0);
}

.error-message {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #dc3545;
    color: white;
    padding: 15px 20px;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 1000;
    opacity: 0;
    transform: translateX(100%);
    transition: all 0.3s ease;
}

.error-message.show {
    opacity: 1;
    transform: translateX(0);
}
</style>

<script>
// Variables globales
let currentCampaignId = {{ campaign_id if campaign_id else 'null' }};
let currentCampaignData = {
    title: '{{ campaign_title|e }}',
    description: '{{ campaign_description|e }}',
    image_url: '{{ campaign_image_url|e }}',
    url: '{{ current_url|e }}'
};

// Fonctions d'export
async function exportCampaignPDF() {
    showLoading('Génération du PDF...');
    
    try {
        const response = await fetch(`/api/campaigns/${currentCampaignId}/export/pdf`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        });
        
        if (response.ok) {
            const blob = await response.blob();
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `campagne-${currentCampaignData.title.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.pdf`;
            a.click();
            window.URL.revokeObjectURL(url);
            showSuccess('PDF généré avec succès !');
        } else {
            throw new Error('Erreur lors de la génération du PDF');
        }
    } catch (error) {
        showError('Erreur lors de l\'export PDF: ' + error.message);
    } finally {
        hideLoading();
    }
}

async function exportCampaignImage() {
    showLoading('Génération de l\'image...');
    
    try {
        const response = await fetch(`/api/campaigns/${currentCampaignId}/export/image`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        });
        
        if (response.ok) {
            const blob = await response.blob();
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `campagne-${currentCampaignData.title.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.png`;
            a.click();
            window.URL.revokeObjectURL(url);
            showSuccess('Image générée avec succès !');
        } else {
            throw new Error('Erreur lors de la génération de l\'image');
        }
    } catch (error) {
        showError('Erreur lors de l\'export image: ' + error.message);
    } finally {
        hideLoading();
    }
}

function exportCampaignText() {
    const textContent = `
CAMPAGNE MARKETING - ${currentCampaignData.title}
${'='.repeat(50)}

Titre: ${currentCampaignData.title}
Description: ${currentCampaignData.description}

Contenu de la campagne:
${document.querySelector('.campaign-content')?.textContent || ''}

---
Généré par NinjaLead.ai
Date: ${new Date().toLocaleDateString('fr-FR')}
URL: ${currentCampaignData.url}
    `.trim();
    
    const blob = new Blob([textContent], { type: 'text/plain' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `campagne-${currentCampaignData.title.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.txt`;
    a.click();
    window.URL.revokeObjectURL(url);
    showSuccess('Fichier texte généré avec succès !');
}

async function exportCampaignJSON() {
    try {
        const response = await fetch(`/api/campaigns/${currentCampaignId}/export/json`);
        const campaignData = await response.json();
        
        const blob = new Blob([JSON.stringify(campaignData, null, 2)], { type: 'application/json' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `campagne-${currentCampaignData.title.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.json`;
        a.click();
        window.URL.revokeObjectURL(url);
        showSuccess('Fichier JSON généré avec succès !');
    } catch (error) {
        showError('Erreur lors de l\'export JSON: ' + error.message);
    }
}

// Fonctions de publication automatique
async function publishToFacebook() {
    await publishToPlatform('facebook');
}

async function publishToInstagram() {
    await publishToPlatform('instagram');
}

async function publishToLinkedIn() {
    await publishToPlatform('linkedin');
}

async function publishToTwitter() {
    await publishToPlatform('twitter');
}

async function publishToPlatform(platform) {
    showLoading(`Publication sur ${platform}...`);
    
    try {
        const response = await fetch(`/api/campaigns/${currentCampaignId}/publish/${platform}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        });
        
        const result = await response.json();
        
        if (result.success) {
            showSuccess(`Publication sur ${platform} réussie !`);
        } else {
            throw new Error(result.error || 'Erreur lors de la publication');
        }
    } catch (error) {
        showError(`Erreur lors de la publication sur ${platform}: ` + error.message);
    } finally {
        hideLoading();
    }
}

async function publishToMultiplePlatforms() {
    showLoading('Publication sur toutes les plateformes...');
    
    try {
        const response = await fetch(`/api/campaigns/${currentCampaignId}/publish/multiple`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        });
        
        const result = await response.json();
        
        if (result.success) {
            let message = 'Publications terminées:\n';
            for (const [platform, status] of Object.entries(result.results)) {
                message += `${platform}: ${status.success ? '✓' : '✗'}\n`;
            }
            showSuccess(message);
        } else {
            throw new Error('Erreur lors des publications');
        }
    } catch (error) {
        showError('Erreur lors des publications: ' + error.message);
    } finally {
        hideLoading();
    }
}

// Fonctions email marketing
async function createEmailCampaign() {
    showLoading('Création de la campagne email...');
    
    try {
        const response = await fetch(`/api/campaigns/${currentCampaignId}/email/create`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        });
        
        const result = await response.json();
        
        if (result.success) {
            showSuccess('Campagne email créée avec succès !');
            // Rediriger vers la gestion des emails si disponible
            if (result.email_campaign_url) {
                setTimeout(() => {
                    window.open(result.email_campaign_url, '_blank');
                }, 1000);
            }
        } else {
            throw new Error(result.error || 'Erreur lors de la création');
        }
    } catch (error) {
        showError('Erreur lors de la création de la campagne email: ' + error.message);
    } finally {
        hideLoading();
    }
}

// Fonctions utilitaires
function showLoading(message = 'Chargement...') {
    let overlay = document.querySelector('.loading-overlay');
    if (!overlay) {
        overlay = document.createElement('div');
        overlay.className = 'loading-overlay';
        overlay.innerHTML = `
            <div class="loading-content">
                <div class="spinner-border text-primary mb-3"></div>
                <div class="loading-message">${message}</div>
            </div>
        `;
        document.body.appendChild(overlay);
    } else {
        overlay.querySelector('.loading-message').textContent = message;
    }
    overlay.style.display = 'flex';
}

function hideLoading() {
    const overlay = document.querySelector('.loading-overlay');
    if (overlay) {
        overlay.style.display = 'none';
    }
}

function showSuccess(message) {
    showMessage(message, 'success');
}

function showError(message) {
    showMessage(message, 'error');
}

function showMessage(message, type) {
    const messageEl = document.createElement('div');
    messageEl.className = `${type}-message`;
    messageEl.textContent = message;
    document.body.appendChild(messageEl);
    
    setTimeout(() => messageEl.classList.add('show'), 100);
    setTimeout(() => {
        messageEl.classList.remove('show');
        setTimeout(() => messageEl.remove(), 300);
    }, 3000);
}

// Copie du lien
document.addEventListener('DOMContentLoaded', function() {
    const copyButton = document.querySelector('.copy-link');
    if (copyButton) {
        copyButton.addEventListener('click', function() {
            const url = this.dataset.url;
            navigator.clipboard.writeText(url).then(() => {
                showSuccess('Lien copié dans le presse-papiers !');
            }).catch(() => {
                showError('Erreur lors de la copie du lien');
            });
        });
    }
});
</script>

<!-- Exportation en différents formats -->
    <div class="export-options mt-3">
        <h6 class="text-muted small mb-2" style="color: #ff6b35 !important;">{{ _('Exporter en') }}:</h6>
        <div class="btn-group btn-group-sm">
            <button class="btn btn-outline-warning export-pdf" style="border-color: #ff6b35; color: #ff6b35;">
                <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;"> PDF
            </button>
            <button class="btn btn-outline-warning export-image" style="border-color: #ff6b35; color: #ff6b35;">
                <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;"> {{ _('Image') }}
            </button>
            <button class="btn btn-outline-warning export-text" style="border-color: #ff6b35; color: #ff6b35;">
                <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;"> {{ _('Texte') }}
            </button>
            <button class="btn btn-outline-warning export-html" style="border-color: #ff6b35; color: #ff6b35;">
                <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;"> HTML
            </button>
        </div>
    </div>
</div>

<style>
    .social-share-container {
        background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
        border: 1px solid #ff6b35;
        border-radius: 12px;
        padding: 1.5rem;
        margin: 1.5rem 0;
        box-shadow: 0 4px 15px rgba(255, 107, 53, 0.1);
    }
    
    .social-share-header h5 {
        color: #ff6b35;
        font-weight: 600;
    }
    
    .social-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        margin-top: 1rem;
    }
    
    .social-button {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        border-radius: 50px;
        color: white;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
        min-width: 120px;
    }
    
    .social-button i {
        font-size: 1.1rem;
    }
    
    .social-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(255, 107, 53, 0.3);
        filter: brightness(1.15);
    }
    
    .facebook-share {
        background: linear-gradient(135deg, #ff6b35, #ff8c42);
        border: 1px solid #cc4a28;
    }
    
    .twitter-share {
        background: linear-gradient(135deg, #ff6b35, #ff8c42);
        border: 1px solid #cc4a28;
    }
    
    .linkedin-share {
        background: linear-gradient(135deg, #ff6b35, #ff8c42);
        border: 1px solid #cc4a28;
    }
    
    .pinterest-share {
        background: linear-gradient(135deg, #ff6b35, #ff8c42);
        border: 1px solid #cc4a28;
    }
    
    .reddit-share {
        background: linear-gradient(135deg, #ff6b35, #ff8c42);
        border: 1px solid #cc4a28;
    }
    
    .copy-link {
        background: linear-gradient(135deg, #6c757d, #868e96);
        border: 1px solid #495057;
    }
    
    .copy-link.copied {
        background: linear-gradient(135deg, #28a745, #34ce57);
        border: 1px solid #1e7e34;
    }
    
    /* Effet WOW avec animation */
    @keyframes socialPulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.08); }
        100% { transform: scale(1); }
    }
    
    .social-button:hover i {
        animation: socialPulse 0.5s ease;
    }
    
    /* Ajout d'une légère animation sur hover pour les boutons d'export */
    .export-options .btn:hover {
        transform: translateY(-2px);
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(255, 107, 53, 0.25);
        background: linear-gradient(135deg, #ff6b35, #ff8c42) !important;
        color: white !important;
        border-color: #cc4a28 !important;
    }
    
    .export-options .btn:hover i {
        color: #cc4a28 !important;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialiser les tooltips Bootstrap
        try {
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-toggle="tooltip"]'));
            if (typeof bootstrap !== 'undefined' && bootstrap.Tooltip) {
                tooltipTriggerList.forEach(function (tooltipTriggerEl) {
                    new bootstrap.Tooltip(tooltipTriggerEl);
                });
            }
        } catch (e) {
            console.log('Erreur initialisation tooltips:', e);
        }
        
        // Fonctionnalité pour copier le lien
        const copyLinkBtn = document.querySelector('.copy-link');
        if (copyLinkBtn) {
            copyLinkBtn.addEventListener('click', function() {
                const url = this.getAttribute('data-url');
                
                // Créer un élément de texte temporaire
                const tempInput = document.createElement('input');
                tempInput.value = url;
                document.body.appendChild(tempInput);
                
                // Sélectionner et copier le texte
                tempInput.select();
                document.execCommand('copy');
                
                // Supprimer l'élément temporaire
                document.body.removeChild(tempInput);
                
                // Mettre à jour le texte et l'apparence du bouton
                const originalText = this.innerHTML;
                this.classList.add('copied');
                this.innerHTML = '<img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;"><span>{{ _("Copié !") }}</span>';
                
                // Restaurer l'état initial après 2 secondes
                setTimeout(() => {
                    this.classList.remove('copied');
                    this.innerHTML = originalText;
                }, 2000);
            });
        }
        
        // Fonctionnalités d'exportation (à implémenter)
        document.querySelector('.export-pdf')?.addEventListener('click', function() {
            alert('{{ _("Exportation PDF en cours de développement") }}');
        });
        
        document.querySelector('.export-image')?.addEventListener('click', function() {
            alert('{{ _("Exportation Image en cours de développement") }}');
        });
        
        document.querySelector('.export-text')?.addEventListener('click', function() {
            alert('{{ _("Exportation Texte en cours de développement") }}');
        });
        
        document.querySelector('.export-html')?.addEventListener('click', function() {
            alert('{{ _("Exportation HTML en cours de développement") }}');
        });
    });
</script>
{% endmacro %}