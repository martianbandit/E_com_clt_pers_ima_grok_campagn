{% extends 'layout.html' %}

{% block title %}{{ _('MarkEasy - Tableau de bord') }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">
        <img src="{{ url_for('static', filename='images/ninja-analytics.png') }}" alt="" style="width: 20px; height: 20px; margin-right: 12px;" class="text-primary">{{ _('Tableau de bord') }}
    </h1>
    <div class="d-flex gap-2">
        <a href="{{ url_for('profiles') }}" class="btn btn-outline-primary btn-sm">
            üë• {{ _('Profils') }}
        </a>
        <a href="{{ url_for('campaigns') }}" class="btn btn-outline-success btn-sm">
            <img src="{{ url_for('static', filename='images/ninja-megaphone.png') }}" alt="" style="width: 14px; height: 14px; margin-right: 4px;">{{ _('Campagnes') }}
        </a>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                    {{ _('Your Boutiques') }}
                </h5>
            </div>
            <div class="card-body">
                {% if boutiques %}
                    <div class="list-group">
                        {% for boutique in boutiques %}
                            <div class="list-group-item list-group-item-action card-boutique">
                                <div class="d-flex w-100 justify-content-between">
                                    <h5 class="mb-1">{{ boutique.name }}</h5>
                                    <small>{{ _('Created') }}: {{ boutique.created_at.strftime('%Y-%m-%d') }}</small>
                                </div>
                                <p class="mb-1">{{ boutique.description }}</p>
                                <small>{{ _('Target demographic') }}: {{ boutique.target_demographic }}</small>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="alert alert-info">
                        <img src="{{ url_for('static', filename='images/ninja-analytics.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                        {{ _('You haven\'t added any boutiques yet. Add your first boutique to get started.') }}
                    </div>
                {% endif %}
                
                <button class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#addBoutiqueModal">
                    <img src="{{ url_for('static', filename='images/ninja-action.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                    {{ _('Add New Boutique') }}
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">
                    <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                    {{ _('Niche Markets') }}
                </h5>
            </div>
            <div class="card-body">
                {% if niches %}
                    <div class="list-group">
                        {% for niche in niches %}
                            <div class="list-group-item list-group-item-action card-niche">
                                <div class="d-flex w-100 justify-content-between">
                                    <h5 class="mb-1">{{ niche.name }}</h5>
                                    <small>{{ _('Created') }}: {{ niche.created_at.strftime('%Y-%m-%d') }}</small>
                                </div>
                                <p class="mb-1">{{ niche.description }}</p>
                                <small>{{ _('Key characteristics') }}: {{ niche.key_characteristics }}</small>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="alert alert-info">
                        <img src="{{ url_for('static', filename='images/ninja-analytics.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                        {{ _('No niche markets defined yet. Add your first niche to target specific customer segments.') }}
                    </div>
                {% endif %}
                
                <button class="btn btn-success mt-3" data-bs-toggle="modal" data-bs-target="#addNicheModal">
                    <img src="{{ url_for('static', filename='images/ninja-action.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                    {{ _('Add New Niche') }}
                </button>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <!-- Carte de r√©sum√© des performances -->
    <div class="col-12">
        <div class="card border-warning shadow-sm">
            <div class="card-header bg-warning text-white">
                <h5 class="mb-0">
                    <img src="{{ url_for('static', filename='images/ninja-analytics.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                    {{ _('Performance des campagnes') }}
                </h5>
            </div>
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <p class="lead">
                            {{ _('Analysez les performances de vos campagnes marketing par type de boutique.') }}
                        </p>
                        <p>
                            {{ _('D√©couvrez quelles boutiques g√©n√®rent le plus d\'engagement et de conversions, les types de campagnes les plus efficaces, et bien plus encore.') }}
                        </p>
                    </div>
                    <div class="col-md-4 text-center text-md-end">
                        <a href="{{ url_for('boutique_dashboard') }}" class="btn btn-warning btn-lg">
                            <img src="{{ url_for('static', filename='images/ninja-analytics.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                            {{ _('Analytics D√©taill√©s') }}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                    {{ _('Prochaines √©tapes') }}
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3 mb-md-0">
                        <div class="d-flex">
                            <div class="flex-shrink-0">
                                <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                    <img src="{{ url_for('static', filename='images/ninja-handshake.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                                </div>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h5>{{ _('G√©n√©rer des profils clients') }}</h5>
                                <p class="mb-0">{{ _('Cr√©ez des profils clients d√©taill√©s pour la niche de votre boutique.') }}</p>
                                <a href="/profiles" class="btn btn-sm btn-outline-primary mt-2">
                                    <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                                    {{ _('Profils clients') }}
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3 mb-md-0">
                        <div class="d-flex">
                            <div class="flex-shrink-0">
                                <div class="bg-success rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                    <img src="{{ url_for('static', filename='images/ninja-megaphone.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                                </div>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h5>{{ _('Cr√©er des campagnes marketing') }}</h5>
                                <p class="mb-0">{{ _('D√©veloppez des campagnes marketing personnalis√©es pour vos clients.') }}</p>
                                <a href="/campaigns" class="btn btn-sm btn-outline-success mt-2 dashboard-btn-neon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="dashboard-icon-neon">
                                        <path d="M7.5 8c.13 0 .24-.02.37-.04L10.5 10.5c-.08.13-.04.24-.04.37 0 .41.34.75.75.75s.75-.34.75-.75-.34-.75-.75-.75c-.13 0-.24.02-.37.04L8.31 7.63c.08-.13.04-.24.04-.37 0-.41-.34-.75-.75-.75s-.75.34-.75.75.34.75.75.75zM12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                    </svg>
                                    {{ _('Campagnes') }}
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="d-flex">
                            <div class="flex-shrink-0">
                                <div class="bg-info rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                    <img src="{{ url_for('static', filename='images/ninja-logo.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">
                                </div>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h5>{{ _('G√©n√©rer des images marketing') }}</h5>
                                <p class="mb-0">{{ _('Cr√©ez des images personnalis√©es qui refl√®tent le style de votre boutique.') }}</p>
                                <a href="/image_generation" class="btn btn-sm btn-outline-info mt-2 dashboard-btn-neon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="dashboard-icon-neon">
                                        <path d="M9 12c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3zm4-9.5V4h2c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h2V2.5C6 1.12 7.12 0 8.5 0S11 1.12 11 2.5z"/>
                                    </svg>
                                    {{ _('G√©n√©rer des images') }}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Boutique Modal -->
<div class="modal fade" id="addBoutiqueModal" tabindex="-1" aria-labelledby="addBoutiqueModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="addBoutiqueModalLabel">{{ _('Add New Boutique') }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="boutique-form">
                    <div class="mb-3">
                        <label for="boutique-name" class="form-label">{{ _('Boutique Name') }}</label>
                        <input type="text" class="form-control" id="boutique-name" required>
                    </div>
                    <div class="mb-3">
                        <label for="boutique-description" class="form-label">{{ _('Description') }}</label>
                        <textarea class="form-control" id="boutique-description" rows="3" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="target-demographic" class="form-label">{{ _('Target Demographic') }}</label>
                        <input type="text" class="form-control" id="target-demographic" placeholder="{{ _('e.g., Women 25-40, Urban professionals') }}">
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <img src="{{ url_for('static', filename='images/ninja-action.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">{{ _('Add Boutique') }}
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Add Niche Modal -->
<div class="modal fade" id="addNicheModal" tabindex="-1" aria-labelledby="addNicheModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="addNicheModalLabel">{{ _('Add Niche Market') }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="niche-form">
                    <div class="mb-3">
                        <label for="niche-name" class="form-label">{{ _('Niche Name') }}</label>
                        <input type="text" class="form-control" id="niche-name" required placeholder="{{ _('e.g., Sustainable Fashion, Vintage Collectibles') }}">
                    </div>
                    <div class="mb-3">
                        <label for="niche-description" class="form-label">{{ _('Description') }}</label>
                        <textarea class="form-control" id="niche-description" rows="3" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="key-characteristics" class="form-label">{{ _('Key Characteristics') }}</label>
                        <textarea class="form-control" id="key-characteristics" rows="2" placeholder="{{ _('e.g., Eco-friendly, Handmade, Limited edition') }}"></textarea>
                    </div>
                    <button type="submit" class="btn btn-success">
                        <img src="{{ url_for('static', filename='images/ninja-action.png') }}" alt="" style="width: 16px; height: 16px; margin-right: 8px;">{{ _('Add Niche') }}
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
